---
// src/components/BlogImage.astro
console.log('ğŸ”¥ BlogImage ì»´í¬ë„ŒíŠ¸ ì‹¤í–‰ë¨!!!');

import blurHashData from '../data/blurhash.json';
type BlurHashData = Record<string, string>;
const blurHash: BlurHashData = blurHashData as unknown as BlurHashData;

interface Props {
  src: string;
  alt: string;
  slug: string;
}

const { src, alt, slug } = Astro.props;
console.log('ë°›ì€ props:', { src, alt, slug });

// í˜„ì¬ URLê³¼ ì‹¤ì œ íŒŒì¼ ì‹œìŠ¤í…œ ê²½ë¡œ í™•ì¸
const currentUrl = Astro.url.pathname;
console.log('í˜„ì¬ URL:', currentUrl);

// ì—¬ëŸ¬ ê°€ëŠ¥í•œ ê²½ë¡œë“¤ í…ŒìŠ¤íŠ¸
const possiblePaths = [
  `blog/${slug}/${src.replace('./', '')}`,  // ì›ë˜ ë°©ì‹
  `${slug}/${src.replace('./', '')}`,       // blog/ ì œì™¸
  `blog/${slug}${src.replace('.', '')}`,    // ./ â†’ /
  src,                                      // ì›ë³¸ ê·¸ëŒ€ë¡œ
];

console.log('ê°€ëŠ¥í•œ ê²½ë¡œë“¤:', possiblePaths);

console.log('ğŸ”¥ BlogImage ì»´í¬ë„ŒíŠ¸ ì‹¤í–‰ë¨!!!');

---

<div style="background: orange; color: white; padding: 20px; margin: 10px;">
  <h3>ë””ë²„ê¹… ì •ë³´:</h3>
  <p><strong>í˜„ì¬ URL:</strong> {currentUrl}</p>
  <p><strong>slug:</strong> {slug}</p>
  <p><strong>src:</strong> {src}</p>
  <p><strong>BlurHash ë°ì´í„° í‚¤ ê°œìˆ˜:</strong> {Object.keys(blurHash).length}</p>
  
  <details>
    <summary>BlurHash ë°ì´í„° í‚¤ë“¤ ë³´ê¸°</summary>
    <pre style="background: #333; padding: 10px; overflow: auto;">
{JSON.stringify(Object.keys(blurHash), null, 2)}
    </pre>
  </details>
  
  <details>
    <summary>ì‹œë„í•œ ê²½ë¡œë“¤</summary>
    {possiblePaths.map(path => (
      <p style="font-family: monospace; font-size: 12px;">
        {path} â†’ {blurHash[path] ? 'âœ… ìˆìŒ' : 'âŒ ì—†ìŒ'}
      </p>
    ))}
  </details>
</div>

<!-- <img alt={alt} style="max-width: 100px; border: 2px solid red;" /> -->